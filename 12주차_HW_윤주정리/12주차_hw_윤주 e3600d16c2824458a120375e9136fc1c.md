# 12주차_hw_윤주
https://www.notion.so/12-_hw_-e3600d16c2824458a120375e9136fc1c

### 힙(Heap) 영역

힙 영역은 사용자가 직접 관리해야 하는 메모리 영역. 동적 할당이 되는 변수들은 힙 영역에 저장된다. 사용자가 공간을 동적으로 할당하고 해제한다. (런타임에 크기가 결정된다) 커널 영역을 보호하기 위해 메모리의 낮은 주소에서 높은 주소 방향으로 할당된다.

### 스택(Stack) 영역

스택 영역은 함수 호출과 관련된 지역 변수와 매개변수가 저장된다. 힙보다 접근 속도가 빠르고, 명시적으로 변수를 할당/해제할 필요가 없다. (컴파일 타임에 크기가 결정된다) 함수 호출과 함께 할당되고, 호출이 완료되면 소멸한다. 커널 영역을 보호하기 위해 메모리의 높은 주소에서 낮은 주소 방향으로 할당된다.

![스크린샷 2024-07-04 오후 4.32.46.png](12%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1_hw_%E1%84%8B%E1%85%B2%E1%86%AB%E1%84%8C%E1%85%AE%20e3600d16c2824458a120375e9136fc1c/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-07-04_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.32.46.png)

### 파이썬이 느린 이유

→ 인터프리터 언어로 한 줄씩 해석되고 실행되기 때문이다. 동적 타이핑과 GIL로 인해 멀티스레딩 성능이 제한된다. 또한, 가비지 컬렉션 등 런타임 오버헤드와 예외 처리 같은 기능이 추가적인 오버헤드를 초래한다.

### FastAPI

패스트 API는 파이썬 타입을 기반으로 한 가장 빠른 API 서버 웹 프레임워크. 

비동기식으로 작성되어 IO 병목 현상에서 빠른 성능을 보여줌. 

→ 비동기식 프로그래밍은 입출력 작업이 시작된 후 작업 완료를 기다리지 않고 다른 작업을 가져와, 입출력 작업이 완료되면 그 시점에 맞춰 결과를 처리하는 방식이다. 이는 CPU를 더 효율적으로 활용하고 동시 요청이 가능하게 한다.

### 패스트 API의 장점

- 비동기 작업을 하려면 멀티 스레드가 필요하다. 패스트 API는 비동기 작업이 가능하므로 빠르다. 패스트 API는 멀티 스레드는 안 되지만 멀티 프로세스 개념으로 IO를 처리하는 동안 다른 작업을 할 수 있다.
- Starlette과 Pydantic 덕분에 높은 성능과 빠른 코드 작성이 가능하며, 버그 감소, 직관적 코드, 견고함, 표준 기반, 자동 문서화, 마이크로서비스 지향, 범용성을 제공.
- Starlette는 비동기 프로그래밍을 지원하여 고성능을 발휘하고, Pydantic은 데이터 유효성 검사와 타입 힌트를 사용해 빠르고 안전한 데이터 처리를 돕습니다.
- 패스트 API는 공식 문서가 훌륭하다. 구글 트렌드에서 검색량이 높고, 국내에서도 많이 사용되고 있다. DB 연결 함수를 따로 빼서 DB 커넥트라는 함수를 만들어 호출한다.

### 파이썬의 멀티 프로세스

파이썬은 멀티 프로세스로 비동기를 구현한다. 

Q : 멀티 스레드와 멀티 프로세스 중 어떤 것이 더 효율적인가?

A : 멀티 프로세스는 CPU 코어에 제한이 있다. 멀티 스레드는 프로세스 내부에서 운영되기 때문에 부담이 적다.

### 멀티 스레드의 단점

멀티 스레드는 자원을 각각 할당해야 해서 무겁고, 자원끼리 충돌할 위험이 있다. 메모리 충돌의 가능성도 있다. 패스트 API는 실시간 데이터 처리에 많이 사용된다.

![스크린샷 2024-07-04 오후 4.28.33.png](12%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1_hw_%E1%84%8B%E1%85%B2%E1%86%AB%E1%84%8C%E1%85%AE%20e3600d16c2824458a120375e9136fc1c/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2024-07-04_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_4.28.33.png)

### django와 FastAPI

장고를 사용하다가 고성능 API가 필요할 때 패스트 API라는 프레임워크를 사용할 수 있다. 웹 애플리케이션에서 고성능 API가 필요하면 패스트 API를 사용하여 해당 부분을 처리할 수 있다. 장고는 웹 서빙을 하고, 데이터 분석이 필요할 때는 패스트 API를 호출해 필요한 정보를 받아오는 방식으로 사용할 수 있다.

- 고성능 API 개발의 목적
    
    고성능 API는 대량의 요청을 효율적으로 처리할 수 있는 API를 의미합니다. 이는 다음과 같은 상황에서 중요합니다:
    
    1. **실시간 데이터 처리**: 주식 거래 시스템, 채팅 애플리케이션, 게임 서버 등
    2. **대규모 트래픽 처리**: 소셜 네트워크, 인기 있는 웹 서비스 등
    3. **데이터 집약적 애플리케이션**: 데이터 분석 플랫폼, 머신 러닝 모델 제공 서비스 등

### FastAPI와 Flask

Flask와 FastAPI는 각각의 장단점을 가진 파이썬 웹 프레임워크입니다. FastAPI는 비동기 처리와 자동 문서화 기능으로 높은 성능과 개발 속도를 제공하며, 대규모 프로젝트와 실시간 애플리케이션에 적합합니다. 반면, Flask는 간결하고 유연한 구조로 소규모 프로젝트나 간단한 API 개발에 적합하며, 큰 커뮤니티와 다양한 확장 라이브러리를 제공합니다.

### DB 연결의 종속성

DB 연결이 API와 연결되어 있어야만 API가 작동한다. 이를 종속성이 있다고 하고, 함수로 의존성 주입을 설명한다. 의존성 주입은 "API가 DB가 필요해. 나는 API고, 이미 연결이 선행되어야만 작동할 수 있어"라고 선언하는 것이다. 패스트 API는 의존성 관리가 편하다는 장점이 있다.