# 네트워크 계층의 이해

---

## 데이터 링크 계층의 한계

---

### 1. 라우팅의 필요성
- **문제점**: 물리 계층과 데이터 링크 계층만으로는 다른 네트워크 간의 경로를 파악하기 어렵습니다.
- **해결책**: 
  - **라우팅**: 패킷이 이동할 최적의 경로를 결정합니다.
  - **라우터**: 네트워크 계층의 장비로 라우팅이 가능합니다.

### 2. MAC 주소의 한계
- **문제점**: 모든 네트워크에 속한 호스트의 위치를 특정하기 어렵습니다.
- **해결책**: 
  - **IP 주소**: 수신지 역할을 하며, MAC 주소보다 우선적으로 활용됩니다.

## 인터넷 프로토콜 (IP)

---

### IP 주소의 형태
- **형태**: 4바이트로 구성, 8비트씩 나누어 0~255 범위의 10진수로 표기합니다.
- **Octet**: `.`으로 구분된 8비트를 의미합니다.

### IP의 기능
1. **IP 주소 지정**
    - 송수신 대상을 지정합니다.
2. **IP 단편화**
    - 패킷의 크기가 MTU보다 클 경우, 작은 패킷으로 나누어 전송합니다.
3. **MTU (Maximum Transmission Unit)**
    - 한 번에 전송 가능한 IP 패킷의 최대 크기 (일반적으로 1500바이트)입니다.
4. **식별자**
    - 쪼개진 패킷들이 어떤 메시지에서 분리된 것인지 식별합니다.
5. **플래그**
    - 첫 비트: 사용되지 않음
    - DF 비트: 단편화 금지 표시
6. **단편화 오프셋**
    - 단편화된 패킷이 초기 데이터의 몇 번째 부분인지 표시합니다.
7. **TTL (Time To Live)**
    - 패킷의 수명으로, 라우터를 거칠 때마다 1씩 감소합니다.
8. **프로토콜**
    - 상위 계층의 프로토콜을 나타내는 필드 (예: TCP=6, UDP=17)입니다.
9. **송신지/수신지 IP 주소**
    - 각각의 IP 주소를 표시합니다.

### IPv6
- **필요성**: IPv4 주소의 부족 (2^32, 약 43억개)으로 등장했습니다.
- **형태**: 8개의 그룹, 16진수로 표기되며 할당 가능한 주소는 2^128개입니다.

### ARP (Address Resolution Protocol)
1. **ARP 요청**
    - 모든 호스트에게 ARP 요청 패킷을 브로드캐스트로 전송합니다.
2. **ARP 응답**
    - 유니캐스트 메시지로 응답합니다.
3. **ARP 테이블 갱신**
    - ARP를 활용한 호스트는 ARP 테이블을 유지합니다.

## 라우팅

---

### 라우팅
- **정의**: 패킷이 이동할 최적의 경로를 설정하고, 해당 경로로 패킷을 이동시키는 것
- **라우터**: 네트워크 계층의 핵심 기능 담당
- **홉**: 패킷이 호스트와 라우터 간에, 혹은 라우터와 라우터 간에 이동하는 하나의 과정

### 라우팅 테이블
- **정의**: 특정 수신지까지 도달하기 위한 정보를 명시한 일종의 표
- **기능**: 라우터는 라우팅 테이블을 참고하여 수신지까지의 도달 경로를 판단합니다.
- **구성 방법**: 정적 라우팅과 동적 라우팅

## 신뢰할 수 없는 통신과 비연결형 통신

---

### 네트워크 계층의 IP 프로토콜
- **신뢰할 수 없는 통신**: 패킷이 수신지까지 제대로 전송되었는지 보장하지 않습니다.
- **비연결형 통신**: 송수신 호스트 간에 사전 연결 수립 작업을 거치지 않습니다.

### 전송 계층의 역할
- 이런 한계를 극복하기 위해 전송 계층이 존재합니다.

## TCP vs UDP

---

### TCP (Transmission Control Protocol)
- **연결형 통신**: 두 호스트가 정보를 주고받기 전에 연결을 수립합니다.
- **특징**: 패킷이 올바른 순서대로 수신지에 도착하는 것을 보장합니다.
- **기능**: 오류 제어, 흐름 제어, 혼잡 제어 등 다양한 기능 제공

### UDP (User Datagram Protocol)
- **비연결형 통신**: 연결 수립 없이 패킷을 빠르게 전송합니다.
- **특징**: 패킷 손실이나 순서 변경 가능성이 있습니다.
- **장점**: 비교적 빠른 전송 속도

## TCP 통신 단계

---

### 1. 연결 수립: 쓰리 웨이 핸드셰이크

```markdown
| 송수신 방향 | 세그먼트  | 비유                      |
| ----------- | ----------| ------------------------- |
| A -> B      | SYN       | '연결 시작합니다'         |
| B -> A      | SYN + ACK | '네, 확인했습니다. 연결 시작해요!' |
| A -> B      | ACK       | '네, 확인했습니다'        |
```

- **액티브 오픈**: 연결을 시작하는 호스트의 연결 수립 과정
- **패시브 오픈**: 연결 요청을 받고 연결 수립해주는 호스트의 연결 수립 과정

### 2. 데이터 송수신

### 3. 연결 종료

```markdown
| 송수신 방향 | 세그먼트 | 비유                    |
| ----------- | -------- | ----------------------- |
| A -> B      | FIN      | '연결 끊을게요'         |
| B -> A      | ACK      | '네, 확인했습니다'       |
| B -> A      | FIN      | '이제 연결 끊어요'       |
| A -> B      | ACK      | '네, 확인했습니다'       |
```

- **액티브 클로즈**: 연결을 끊는 호스트의 연결 종료 과정
- **패시브 클로즈**: 연결 종료 요청을 받고 연결을 끊는 호스트의 연결 종료 과정

## UDP 통신

---

### 특징
- **비유**: 수신지에 패킷들을 빠르게 마구 던지는 것과 같습니다.
- **문제점**: 패킷 손실이나 순서 변경 가능성이 있습니다.

## HTTP vs HTTPS

---

### HTTP (Hypertext Transfer Protocol)
- **특징**: 상태를 유지하지 않는 **스테이트리스** 프로토콜
- **문제점**: 서버가 클라이언트와 관련된 상태를 기억하지 않음

### HTTPS (Hypertext Transfer Protocol Secure)
- **특징**: HTTP 메시지의 안전한 송수신을 위한 프로토콜
- **기반**: SSL과 TLS 기반 암호화 통신

### HTTPS 동작 방식
1. TCP 쓰리 웨이 핸드셰이크
2. TLS 핸드셰이크
3. 암호화된 메시지 송수신

## TDD (Time Division Duplexing)

---

### 정의
- 무선 통신 시스템에서 단일 주파수 대역을 시간적으로 분할하여 송신과 수신을 번갈아가며 수행하는 기술

### 장점
1. **대역폭의 효율적 사용**: 동일한 주파수 대역을 송수신에 모두 사용하여 주파수 자원을 효율적으로 사용합니다.
2. **간섭 감소**: 송신과 수신이 시간적으로 분리되어 있어 간섭이 줄어듭니다.
3. **비용 절감**: 단일 주파수 대역 사용으로 인한 비용 절감 효과가 있습니다.

### 단점
1. **시간 동기화 필요**: 송신과 수신 간의 정확한 시간 동기화가 필요합니다.
2. **데이터 전송 지연**: 시간 분할로 인해 송수신 간의 전환 시간 동안 지연이 발생할 수 있습니다.

### TDD와 FDD의 비교
- **TDD (Time Division Duplexing)**: 동일한 주파수 대역을 시간적으로 분리하여 송신과 수신을 번갈아가며 사용합니다.
- **FDD (Frequency Division Duplexing)**: 서로 다른 주파수 대역을 사용하여 송신과 수신을 동시에 수행합니다.